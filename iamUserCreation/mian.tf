terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 6.0"
    }
  }
}

provider "aws" {
  region = "us-east-1"  
}

resource "aws_iam_user" "iamUser" {
    name = var.iam_user_name
  
}

resource "aws_iam_user_login_profile" "example" {
  user    = aws_iam_user.iamUser.name
  pgp_key = "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"
}

output "password" {
  value = aws_iam_user_login_profile.example.encrypted_password
}


output "password_instructions" {
  value = "To decrypt, run: terraform output -raw encrypted_password | base64 --decode | gpg --decrypt"
}
